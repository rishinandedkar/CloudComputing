{
    "AWSTemplateFormatVersion" : "2010-09-09",
    "Resources" :
    {
        "myVPC" :
        {
         "Type" : "AWS::EC2::VPC",
         "Properties":
         {
            "CidrBlock" :"10.0.0.0/16",
            "EnableDnsSupport" : "false",
            "EnableDnsHostnames" : "false",
            "InstanceTenancy" : "dedicated",
            "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "vpcName" }} ]
         },
         "DependsOn":["myGateway"]
        },

        "mySubnet1":
        {
         "Type": "AWS::EC2::Subnet",
         "Properties":
        {

          "VpcId": { "Ref": "myVPC"},
          "MapPublicIpOnLaunch": false,
          "AvailabilityZone":{ "Ref": "az1"},
          "CidrBlock": {"Ref":"subnetCidr1"},

         }

       },

       "mySubnet2":
       {
        "Type": "AWS::EC2::Subnet",
        "Properties":
       {

         "VpcId": { "Ref": "myVPC"},
         "MapPublicIpOnLaunch": false,
         "AvailabilityZone": { "Ref": "az2"},
         "CidrBlock": {"Ref":"subnetCidr2"},

        }

      },
      "mySubnet3":
      {
       "Type": "AWS::EC2::Subnet",
       "Properties":
      {

        "VpcId": { "Ref": "myVPC"},
        "MapPublicIpOnLaunch": false,
        "AvailabilityZone": { "Ref": "az3"},
        "CidrBlock": {"Ref":"subnetCidr3"},

       }

     },

     "mySubnet4":
     {
      "Type": "AWS::EC2::Subnet",
      "Properties":
     {

       "VpcId": { "Ref": "myVPC"},
       "MapPublicIpOnLaunch": true,
       "AvailabilityZone": { "Ref": "az1"},
       "CidrBlock": {"Ref":"subnetCidr4"},

      }

    },
    "mySubnet5":
    {
     "Type": "AWS::EC2::Subnet",
     "Properties":
    {

      "VpcId": { "Ref": "myVPC"},
      "MapPublicIpOnLaunch": true,
      "AvailabilityZone": { "Ref": "az2"},
      "CidrBlock": {"Ref":"subnetCidr5"},

     }

   },
   "mySubnet6":
   {
    "Type": "AWS::EC2::Subnet",
    "Properties":
   {

     "VpcId": { "Ref": "myVPC"},
     "MapPublicIpOnLaunch": true,
     "AvailabilityZone":{ "Ref": "az3"},
     "CidrBlock": {"Ref":"subnetCidr6"},

    }

  },




        "myGateway":
        {
        "Type": "AWS::EC2::InternetGateway",
        "Properties":
        {
            "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "gatewayName" }} ]
        }
        },
      "myRouteTable":
      {
        "Type": "AWS::EC2::RouteTable",
        "Properties":
        {
            "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "tableName" }} ],
            "VpcId":{ "Ref": "myVPC"}
        }
      },
      "myFirstRoute":
      {
        "Type": "AWS::EC2::Route",
        "DependsOn":"myInternetGateway",
        "Properties":
        {
            "DestinationCidrBlock":"0.0.0.0/0",
            "RouteTableId":
            {
                "Ref":"myRouteTable"
            },
            "GatewayId":
            {
                "Ref":"myGateway"
            }
        }
      },
       "myInternetGateway":
        {
            "Type":"AWS::EC2::VPCGatewayAttachment",
            "Properties":
            {
                "VpcId":
                {
                    "Ref": "myVPC"
                },
                "InternetGatewayId":
                {
                    "Ref":"myGateway"
                }
            }
        }



    },

    "Parameters":{
        "vpcName":{
            "Type":"String"
        },
        "gatewayName":{
            "Type":"String"
        },
        "tableName":{
            "Type":"String"
        },
        "subnetCidr1":{
          "Type":"String"
        }
        ,
        "subnetCidr2":{
          "Type":"String"
        }
        ,
        "subnetCidr3":{
          "Type":"String"
        }
        ,
        "subnetCidr4":{
          "Type":"String"
        }
        ,
        "subnetCidr5":{
          "Type":"String"
        }
        ,
        "subnetCidr6":{
          "Type":"String"
        },
        "az1":{
          "Type":"String"
        },
        "az2":{
          "Type":"String"
        },
        "az3":{
          "Type":"String"
        }


        }

}
